<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website</title>
    <script src="js/jquery-1.8.2.min.js"></script>
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;600;700&display=swap"
        rel="stylesheet">

    <script>
        $(document).ready(function () {

            var mail = localStorage["mail"];
            document.getElementById("EmailId").value = mail;

            $("#btnFetch").click(function () {
                var userid = $("#EmailId").val();
                var urlWithData = "/JSONfetchRecord?uidkch=" + userid;
                $.getJSON(urlWithData, function (responseJSONAry) {
                    if (responseJSONAry.length == 0)
                        alert("Your Profile Page has no data yet.");
                    else 
                    {
                        $("#hdn1").val(responseJSONAry[0].Photo);
                        $("#img1").attr("src", "/uploads/" + responseJSONAry[0].Photo);
                        $("#hdn2").val(responseJSONAry[0].Aadhaar_Card);
                        $("#img2").attr("src", "/uploads/" + responseJSONAry[0].Aadhar_Card);
                        $("#Name").val(responseJSONAry[0].Name);
                        $("#contact").val(responseJSONAry[0].Contact_Number);
                        $("#Address").val(responseJSONAry[0].Address);
                        $("#Country").val(responseJSONAry[0].Country);
                        $("#Category").val(responseJSONAry[0].Category);
                        $("#Company").val(responseJSONAry[0].Company);
                        $("#EstdIn").val(responseJSONAry[0].Established_In);
                        $("#Sales").val(responseJSONAry[0].Sales);
                        $("#prtnr").val(responseJSONAry[0].Partners);
                        $("#OtherInfo").val(responseJSONAry[0].Other_Information);
                    }
                })
            });
        })    
    </script>
</head>

<body>
    <section class="header" id="Home">
        <div class="hero">  
            <h1>Profile</h1> 
            <center>        
            <form name="frmProfile" method="post" enctype="multipart/form-data" >
                <input type="hidden" id="hdn2" name="hdn2">
                <div class="card">
                    <div>
                        <img id="img2" src="pics/noDoc.png">
                        <label for="input-doc">Choose Document</label>
                        <input type="file" id="input-doc" name="aadhaarCard" style="display :none">
                    </div>
                </div>
            
                    <div class="row2">
                    <div>
                        <button type="Submit" class="main-btn" formaction="/entrepreneur-save">SAVE</button>
                    </div>
                    <div>
                        <button type="Submit" class="main-btn" formaction="/entrepreneur-update">UPDATE</button>
                    </div>
                </div>
            </form>
        </center>
        </div>

    </section>

    <script>
        let profilePic = document.getElementById("img1");
        let inputPhoto = document.getElementById("input-photo");
        inputPhoto.onchange = function () {
            profilePic.src = URL.createObjectURL(inputPhoto.files[0]);
        }

        let Aadhar = document.getElementById("img2");
        let inputFile = document.getElementById("input-doc");
        inputFile.onchange = function () {
            Aadhar.src = URL.createObjectURL(inputFile.files[0]);
        }
    </script>

</body>

</html>